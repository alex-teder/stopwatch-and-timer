var o=Object.defineProperty;var u=(l,t,e)=>t in l?o(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var s=(l,t,e)=>(u(l,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();class c{constructor(){s(this,"PRECISION_MS",10);s(this,"intervalId",null);s(this,"value",0)}get isRunning(){return!!this.intervalId}start(){this.intervalId=setInterval(()=>{this.value++},this.PRECISION_MS)}stop(){clearInterval(this.intervalId),this.intervalId=null}reset(){this.value=0}}class h{constructor(t){s(this,"REFRESH_RATE_MS",32);s(this,"intervalId",null);s(this,"face",null);s(this,"resetBtn",null);s(this,"startStopBtn",null);s(this,"sw");this.sw=t}get hours(){return Math.floor(this.sw.value/36e4)}get minutes(){const t=this.sw.value%36e4;return Math.floor(t/6e3)}get seconds(){const t=this.sw.value%36e4%6e3;return Math.floor(t/100)}get hundredths(){return this.sw.value%36e4%6e3%100}stringify(t){return t.toString().padStart(2,"0")}get textValue(){return[this.hours,this.minutes,this.seconds,this.hundredths].map(this.stringify).join(":")}updateOnce(){this.face.innerText=this.textValue}watchChanges(){this.intervalId=setInterval(()=>{this.updateOnce()},this.REFRESH_RATE_MS)}unwatchChanges(){clearInterval(this.intervalId),this.intervalId=null}mount(t,e,n){this.face=t,this.face.innerText=this.textValue,this.resetBtn=e,this.startStopBtn=n,this.startStopBtn.addEventListener("click",()=>{this.sw.isRunning?(this.sw.stop(),this.unwatchChanges(),this.startStopBtn.innerText="START"):(this.sw.start(),this.watchChanges(),this.startStopBtn.innerText="STOP")}),this.resetBtn.addEventListener("click",()=>{this.sw.reset(),this.updateOnce()})}}class d{constructor(){s(this,"intervalId",null);s(this,"value",0)}get isRunning(){return!!this.intervalId}getValue(){return this.value}setValue(t){this.value=t}start(){this.intervalId=setInterval(()=>{this.value--},100)}stop(){clearInterval(this.intervalId),this.intervalId=null}}class m{constructor(t){s(this,"REFRESH_RATE_MS",64);s(this,"intervalId",null);s(this,"minField",null);s(this,"secField",null);s(this,"button",null);s(this,"timer");this.timer=t}toTimerValue(t,e){return(t*60+e)*10}toReadable(t){t=Math.ceil(t/10);const e=Math.floor(t/60).toString().padStart(2,"0"),n=(t%60).toString().padStart(2,"0");return{minutes:e,seconds:n}}deactivateFields(){this.minField.readOnly=!0,this.secField.readOnly=!0}reactivateFields(){this.minField.readOnly=!1,this.secField.readOnly=!1}mount(t,e,n){this.minField=t,this.secField=e,this.button=n,this.button.addEventListener("click",()=>{this.timer.isRunning?(this.stopTimer(),this.reactivateFields(),this.button.innerText="START"):(this.deactivateFields(),this.startTimer(),this.button.innerText="STOP")}),this.minField.addEventListener("input",()=>{this.minField.value.length>2&&(this.minField.value=this.minField.value.slice(0,2))}),this.secField.addEventListener("input",()=>{this.secField.value.length>2&&(this.secField.value=this.secField.value.slice(0,2))}),this.minField.addEventListener("blur",()=>{this.minField.value.length===0&&(this.minField.value="00")}),this.secField.addEventListener("blur",()=>{this.secField.value.length===0&&(this.secField.value="00")})}startTimer(){const t=parseInt(this.minField.value),e=parseInt(this.secField.value);this.timer.setValue(this.toTimerValue(t,e)),this.timer.start(),this.intervalId=setInterval(()=>{const{minutes:n,seconds:i}=this.toReadable(this.timer.getValue());this.minField.value=n,this.secField.value=i,n==="00"&&i==="00"&&this.endTimer()},this.REFRESH_RATE_MS)}stopTimer(){this.timer.stop(),clearInterval(this.intervalId),this.intervalId=null}async endTimer(){this.button.disabled=!0,this.stopTimer(),await new Promise(t=>{let e=0;const n=setInterval(()=>{e++,e%2!==0?this.minField.parentElement.style.color="transparent":this.minField.parentElement.style.color="inherit",e===10&&(clearInterval(n),t())},200)}),this.button.innerText="START",this.button.disabled=!1,this.reactivateFields()}}const v=document.querySelector("#sw-face"),f=document.querySelector("#sw-reset"),p=document.querySelector("#sw-startstop"),F=new c,S=new h(F);S.mount(v,f,p);const g=document.querySelector("#min-field"),I=document.querySelector("#sec-field"),w=document.querySelector("#timer-startstop"),T=new d,y=new m(T);y.mount(g,I,w);
