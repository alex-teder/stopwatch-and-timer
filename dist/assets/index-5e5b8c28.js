var o=Object.defineProperty;var u=(l,t,e)=>t in l?o(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var i=(l,t,e)=>(u(l,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();class h{constructor(){i(this,"PRECISION_MS",10);i(this,"intervalId",null);i(this,"value",0)}get isRunning(){return!!this.intervalId}start(){this.intervalId=setInterval(()=>{this.value++},this.PRECISION_MS)}stop(){clearInterval(this.intervalId),this.intervalId=null}reset(){this.value=0}}class c{constructor(t){i(this,"REFRESH_RATE_MS",32);i(this,"intervalId",null);i(this,"face",null);i(this,"resetBtn",null);i(this,"startStopBtn",null);i(this,"sw");this.sw=t}get hours(){return Math.floor(this.sw.value/36e4)}get minutes(){const t=this.sw.value%36e4;return Math.floor(t/6e3)}get seconds(){const t=this.sw.value%36e4%6e3;return Math.floor(t/100)}get hundredths(){return this.sw.value%36e4%6e3%100}stringify(t){return t.toString().padStart(2,"0")}get value(){return[this.hours,this.minutes,this.seconds,this.hundredths].map(this.stringify).join(":")}updateChangesOnce(){this.face.innerText=this.value}watchChanges(){this.intervalId=setInterval(()=>{this.updateChangesOnce()},this.REFRESH_RATE_MS)}unwatchChanges(){clearInterval(this.intervalId),this.intervalId=null}mount(t,e,n){this.face=t,this.face.innerText=this.value,this.resetBtn=e,this.startStopBtn=n,this.startStopBtn.addEventListener("click",()=>{this.sw.isRunning?(this.sw.stop(),this.unwatchChanges(),this.startStopBtn.innerText="START"):(this.sw.start(),this.watchChanges(),this.startStopBtn.innerText="STOP")}),this.resetBtn.addEventListener("click",()=>{this.sw.reset(),this.updateChangesOnce()})}}class d{constructor(){i(this,"intervalId",null);i(this,"value",0)}get isRunning(){return!!this.intervalId}getValue(){return Math.ceil(this.value)}setValue(t){this.value=t}start(){this.intervalId=setInterval(()=>{const t=(this.value-.1).toFixed(1);this.value=parseFloat(t)},100)}stop(){clearInterval(this.intervalId),this.intervalId=null}}class v{constructor(t){i(this,"REFRESH_RATE_MS",64);i(this,"intervalId",null);i(this,"minField",null);i(this,"secField",null);i(this,"button",null);i(this,"timer");this.timer=t}toTimerValue(t,e){return t*60+e}toReadable(t){const e=Math.floor(t/60).toString().padStart(2,"0"),n=(t%60).toString().padStart(2,"0");return{minutes:e,seconds:n}}deactivateFields(){this.minField.readOnly=!0,this.secField.readOnly=!0}reactivateFields(){this.minField.readOnly=!1,this.secField.readOnly=!1}mount(t,e,n){this.minField=t,this.secField=e,this.button=n,this.button.addEventListener("click",()=>{this.timer.isRunning?(this.stopTimer(),this.reactivateFields(),this.button.innerText="START"):(this.deactivateFields(),this.startTimer(),this.button.innerText="STOP")}),this.minField.addEventListener("input",()=>{this.minField.value.length>2&&(this.minField.value=this.minField.value.slice(0,2))}),this.secField.addEventListener("input",()=>{this.secField.value.length>2&&(this.secField.value=this.secField.value.slice(0,2))}),this.minField.addEventListener("blur",()=>{this.minField.value.length===0&&(this.minField.value="00")}),this.secField.addEventListener("blur",()=>{this.secField.value.length===0&&(this.secField.value="00")})}startTimer(){const t=parseInt(this.minField.value),e=parseInt(this.secField.value);this.timer.setValue(this.toTimerValue(t,e)),this.timer.start(),this.intervalId=setInterval(()=>{const{minutes:n,seconds:s}=this.toReadable(this.timer.getValue());this.minField.value=n,this.secField.value=s,n==="00"&&s==="00"&&this.endTimer()},this.REFRESH_RATE_MS)}stopTimer(){this.timer.stop(),clearInterval(this.intervalId),this.intervalId=null}async endTimer(){this.button.disabled=!0,this.stopTimer(),await new Promise(t=>{let e=0;const n=setInterval(()=>{e++,e%2!==0?this.minField.parentElement.style.color="transparent":this.minField.parentElement.style.color="inherit",e===10&&(clearInterval(n),t())},200)}),this.button.innerText="START",this.button.disabled=!1,this.reactivateFields()}}const m=document.querySelector("#sw-face"),f=document.querySelector("#sw-reset"),p=document.querySelector("#sw-startstop"),F=new h,S=new c(F);S.mount(m,f,p);const g=document.querySelector("#min-field"),I=document.querySelector("#sec-field"),w=document.querySelector("#timer-startstop"),T=new d,y=new v(T);y.mount(g,I,w);
